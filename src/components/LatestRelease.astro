---
import { releases } from '../data/releases.ts';

const latestRelease = releases.find(r => r.isLatest);
---

<section id="latest" class="py-16 sm:py-28" data-animate="fade-up" data-animate-distance="52px" data-animate-duration="0.9s">
  <div class="mx-auto max-w-6xl px-4">
    <h2
      class="mb-10 text-center text-3xl font-bold font-heading text-text sm:mb-14 sm:text-4xl"
      data-animate="fade-up"
      data-animate-delay="0.05s"
      data-animate-distance="30px"
    >
      Latest Release
    </h2>
    {latestRelease && (
      <article
        class="rounded-[2.5rem] border border-white/40 bg-white/80 p-6 shadow-[0_24px_60px_rgba(148,197,255,0.22)] backdrop-blur-xl transition-shadow duration-500 hover:shadow-[0_32px_84px_rgba(63,131,248,0.3)] sm:p-10"
        data-animate="scale-fade"
        data-animate-distance="34px"
        data-animate-duration="0.85s"
      >
        <div class="grid gap-8 md:grid-cols-[minmax(0,320px)_1fr] md:gap-12" data-animate-stagger="0.08s">
          <img
            src={latestRelease.cover}
            alt={latestRelease.title}
            class="mx-auto w-full max-w-xs rounded-[2rem] border border-primary/10 bg-white/80 p-4 shadow-lg sm:max-w-sm md:mx-0 md:max-w-none"
            data-animate="tilt-float"
            data-animate-distance="26px"
            data-animate-duration="0.9s"
            data-animate-perspective="1100px"
            loading="lazy"
            decoding="async"
          />
          <div
            class="flex flex-col justify-center space-y-4 text-center md:text-left"
            data-animate="fade-up"
            data-animate-delay="0.08s"
            data-animate-distance="26px"
          >
            <div class="space-y-1.5">
              <h3 class="text-2xl font-bold font-heading text-text sm:text-3xl" data-animate="fade-up" data-animate-delay="0.12s">
                {latestRelease.title}
              </h3>
              <p class="text-base text-text/80 sm:text-lg" data-animate="fade-up" data-animate-delay="0.16s">
                {latestRelease.year} {latestRelease.type}
              </p>
            </div>
            {latestRelease.tracks ? (
              <div
                class="rounded-3xl border border-primary/20 bg-white/70 p-4 text-left shadow-inner sm:p-6"
                data-animate="fade-up"
                data-animate-delay="0.22s"
              >
                <p class="text-xs font-semibold uppercase tracking-[0.4em] text-primary/80 sm:text-sm">Tracklist</p>
                <ol class="mt-3 space-y-2 text-sm leading-relaxed text-text/85 sm:text-base" data-animate-stagger="0.06s">
                  {latestRelease.tracks.map(track => (
                    <li class="flex items-start gap-3" data-animate="fade-up" data-animate-distance="18px">
                      <span class="min-w-[2ch] text-sm font-semibold text-primary/85 sm:text-base">
                        {String(track.no).padStart(2, '0')}
                      </span>
                      <span class="flex-1">{track.title}</span>
                      {track.length && <span class="text-sm text-text/60">{track.length}</span>}
                    </li>
                  ))}
                </ol>
              </div>
            ) : (
              <p class="text-sm leading-relaxed text-text/75 sm:text-base" data-animate="fade-up" data-animate-delay="0.22s">
                光の粒がきらめく夜景みたいに、シティポップの高揚感を閉じ込めた 1 曲。イヤフォンから広がる余韻を心ゆくまでどうぞ。
              </p>
            )}
            <div class="flex flex-col gap-3 sm:flex-row sm:items-center" data-animate-stagger="0.08s">
              <a
                href={latestRelease.links.youtube}
                target="_blank"
                rel="noopener noreferrer"
                class="btn-pill btn-float focus-ring w-full bg-primary px-6 py-3 text-base text-white duration-300 hover:bg-primary/90 sm:w-auto"
                data-animate="fade-up"
              >
                Listen on YouTube
              </a>
              {latestRelease.links?.subscription && (
                <a
                  href={latestRelease.links.subscription}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="btn-pill btn-float focus-ring w-full border border-primary/30 px-6 py-3 text-base text-text duration-300 hover:border-primary/60 sm:w-auto"
                  data-animate="fade-up"
                  data-animate-delay="0.08s"
                >
                  Streaming Links
                </a>
              )}
            </div>
          </div>
        </div>
      </article>
    )}
  </div>
</section>
